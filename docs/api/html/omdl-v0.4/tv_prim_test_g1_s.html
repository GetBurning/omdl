<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>omdl: Validation Script (group1)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="mainpage_logo_top_55x55.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">omdl
   &#160;<span id="projectnumber">v0.4</span>
   </div>
   <div id="projectbrief">OpenSCAD Mechanical Design Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('tv_prim_test_g1_s.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Validation Script (group1) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"> <div class="fragment"><div class="line">        include &lt;primitives.scad&gt;;</div>
<div class="line">        use &lt;table.scad&gt;;</div>
<div class="line">        use &lt;console.scad&gt;;</div>
<div class="line">        use &lt;validation.scad&gt;;</div>
<div class="line"></div>
<div class="line">        show_passing = <span class="keyword">true</span>;    <span class="comment">// show passing tests</span></div>
<div class="line">        show_skipped = <span class="keyword">true</span>;    <span class="comment">// show skipped tests</span></div>
<div class="line"></div>
<div class="line">        echo( str(<span class="stringliteral">&quot;OpenSCAD Version &quot;</span>, version()) );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// test-values columns</span></div>
<div class="line">        test_c =</div>
<div class="line">        [</div>
<div class="line">          [<span class="stringliteral">&quot;id&quot;</span>, <span class="stringliteral">&quot;identifier&quot;</span>],</div>
<div class="line">          [<span class="stringliteral">&quot;td&quot;</span>, <span class="stringliteral">&quot;description&quot;</span>],</div>
<div class="line">          [<span class="stringliteral">&quot;tv&quot;</span>, <span class="stringliteral">&quot;test value&quot;</span>]</div>
<div class="line">        ];</div>
<div class="line"></div>
<div class="line">        <span class="comment">// test-values rows</span></div>
<div class="line">        test_r =</div>
<div class="line">        [</div>
<div class="line">          [<span class="stringliteral">&quot;t01&quot;</span>, <span class="stringliteral">&quot;The undefined value&quot;</span>,        undef],</div>
<div class="line">          [<span class="stringliteral">&quot;t02&quot;</span>, <span class="stringliteral">&quot;An odd integer&quot;</span>,             1],</div>
<div class="line">          [<span class="stringliteral">&quot;t03&quot;</span>, <span class="stringliteral">&quot;An small even integer&quot;</span>,      10],</div>
<div class="line">          [<span class="stringliteral">&quot;t04&quot;</span>, <span class="stringliteral">&quot;A large integer&quot;</span>,            100000000],</div>
<div class="line">          [<span class="stringliteral">&quot;t05&quot;</span>, <span class="stringliteral">&quot;A small decimal (epsilon)&quot;</span>,  <a class="code" href="group__constants__general.html#gadc2185da0dc4b67332d77d61d41d56c5">eps</a>],</div>
<div class="line">          [<span class="stringliteral">&quot;t06&quot;</span>, <span class="stringliteral">&quot;The max number&quot;</span>,             <a class="code" href="group__constants__system.html#gac3593fcd05d6b5d5d27717ca794b326a">number_max</a>],</div>
<div class="line">          [<span class="stringliteral">&quot;t07&quot;</span>, <span class="stringliteral">&quot;The min number&quot;</span>,             <a class="code" href="group__constants__system.html#gaf81f4b21ebcedc9e4c7b8feaf7a0cd49">number_min</a>],</div>
<div class="line">          [<span class="stringliteral">&quot;t08&quot;</span>, <span class="stringliteral">&quot;The max number^2&quot;</span>,           <a class="code" href="group__constants__system.html#gac3593fcd05d6b5d5d27717ca794b326a">number_max</a> * <a class="code" href="group__constants__system.html#gac3593fcd05d6b5d5d27717ca794b326a">number_max</a>],</div>
<div class="line">          [<span class="stringliteral">&quot;t09&quot;</span>, <span class="stringliteral">&quot;The invalid number nan&quot;</span>,     0 / 0],</div>
<div class="line">          [<span class="stringliteral">&quot;t10&quot;</span>, <span class="stringliteral">&quot;The boolean true&quot;</span>,           <span class="keyword">true</span>],</div>
<div class="line">          [<span class="stringliteral">&quot;t11&quot;</span>, <span class="stringliteral">&quot;The boolean false&quot;</span>,          <span class="keyword">false</span>],</div>
<div class="line">          [<span class="stringliteral">&quot;t12&quot;</span>, <span class="stringliteral">&quot;A character string&quot;</span>,         <span class="stringliteral">&quot;a&quot;</span>],</div>
<div class="line">          [<span class="stringliteral">&quot;t13&quot;</span>, <span class="stringliteral">&quot;A string&quot;</span>,                   <span class="stringliteral">&quot;This is a longer string&quot;</span>],</div>
<div class="line">          [<span class="stringliteral">&quot;t14&quot;</span>, <span class="stringliteral">&quot;The empty string&quot;</span>,           <a class="code" href="group__constants__system.html#ga1f4eb1b9ec6cef36850e74a6d3fcfeaf">empty_str</a>],</div>
<div class="line">          [<span class="stringliteral">&quot;t15&quot;</span>, <span class="stringliteral">&quot;The empty vector&quot;</span>,           <a class="code" href="group__constants__system.html#ga6b0149f273f74647c652c4891f13e17b">empty_v</a>],</div>
<div class="line">          [<span class="stringliteral">&quot;t16&quot;</span>, <span class="stringliteral">&quot;A 1-tuple vector of undef&quot;</span>,  [undef]],</div>
<div class="line">          [<span class="stringliteral">&quot;t17&quot;</span>, <span class="stringliteral">&quot;A 1-tuple vector&quot;</span>,           [10]],</div>
<div class="line">          [<span class="stringliteral">&quot;t18&quot;</span>, <span class="stringliteral">&quot;A 3-tuple vector&quot;</span>,           [1, 2, 3]],</div>
<div class="line">          [<span class="stringliteral">&quot;t19&quot;</span>, <span class="stringliteral">&quot;A vector of vectors&quot;</span>,        [[1,2,3], [4,5,6], [7,8,9]]],</div>
<div class="line">          [<span class="stringliteral">&quot;t20&quot;</span>, <span class="stringliteral">&quot;A shorthand range&quot;</span>,          [0:9]],</div>
<div class="line">          [<span class="stringliteral">&quot;t21&quot;</span>, <span class="stringliteral">&quot;A range&quot;</span>,                    [0:0.5:9]]</div>
<div class="line">        ];</div>
<div class="line"></div>
<div class="line">        test_ids = <a class="code" href="group__data__table.html#ga7951c7db43e063f87fb8016ac22947da">table_get_row_ids</a>( test_r );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// expected columns: (&quot;id&quot; + one column for each test)</span></div>
<div class="line">        good_c = <a class="code" href="group__prim__vector.html#ga54bf49002be0bde68a526f6bdc5aa48f">pmerge</a>([concat(<span class="stringliteral">&quot;id&quot;</span>, test_ids), concat(<span class="stringliteral">&quot;identifier&quot;</span>, test_ids)]);</div>
<div class="line"></div>
<div class="line">        <span class="comment">// expected rows: (&quot;golden&quot; test results), use &#39;s&#39; to skip test</span></div>
<div class="line">        t = <span class="keyword">true</span>;   <span class="comment">// shortcuts</span></div>
<div class="line">        f = <span class="keyword">false</span>;</div>
<div class="line">        u = undef;</div>
<div class="line">        s = -1;     <span class="comment">// skip test</span></div>
<div class="line"></div>
<div class="line">        good_r =</div>
<div class="line">        [ <span class="comment">// function     01 02 03 04 05 06 07 08 09 10 11 12 13 14 15 16 17 18 19 20 21</span></div>
<div class="line">          [<span class="stringliteral">&quot;is_defined&quot;</span>,  f, t, t, t, t, t, t, t, t, t, t, t, t, t, t, t, t, t, t, t, t],</div>
<div class="line">          [<span class="stringliteral">&quot;not_defined&quot;</span>, t, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_empty&quot;</span>,    f, f, f, f, f, f, f, f, f, f, f, f, f, t, t, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_scalar&quot;</span>,   t, t, t, t, t, t, t, t, t, t, t, f, f, f, f, f, f, f, f, s, s],</div>
<div class="line">          [<span class="stringliteral">&quot;is_iterable&quot;</span>, f, f, f, f, f, f, f, f, f, f, f, t, t, t, t, t, t, t, t, s, s],</div>
<div class="line">          [<span class="stringliteral">&quot;is_string&quot;</span>,   f, f, f, f, f, f, f, f, f, f, f, t, t, t, f, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_vector&quot;</span>,   f, f, f, f, f, f, f, f, f, f, f, f, f, f, t, t, t, t, t, s, s],</div>
<div class="line">          [<span class="stringliteral">&quot;is_boolean&quot;</span>,  f, f, f, f, f, f, f, f, f, t, t, f, f, f, f, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_integer&quot;</span>,  f, t, t, t, f, t, t, f, f, f, f, f, f, f, f, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_decimal&quot;</span>,  f, f, f, f, t, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_number&quot;</span>,   f, t, t, t, t, t, t, t, t, f, f, f, f, f, f, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_range&quot;</span>,    f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, f, t, t],</div>
<div class="line">          [<span class="stringliteral">&quot;is_nan&quot;</span>,      f, f, f, f, f, f, f, f, t, f, f, f, f, f, f, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_inf&quot;</span>,      f, f, f, f, f, f, f, t, f, f, f, f, f, f, f, f, f, f, f, f, f],</div>
<div class="line">          [<span class="stringliteral">&quot;is_even&quot;</span>,     s, f, t, t, f, t, t, s, s, s, s, s, s, s, s, s, s, s, s, s, s],</div>
<div class="line">          [<span class="stringliteral">&quot;is_odd&quot;</span>,      s, t, f, f, f, f, f, s, s, s, s, s, s, s, s, s, s, s, s, s, s]</div>
<div class="line">        ];</div>
<div class="line"></div>
<div class="line">        <span class="comment">// sanity-test tables</span></div>
<div class="line">        <a class="code" href="group__data__table.html#ga2198c3ff2ad1a385d2d1461df28e3b2f">table_check</a>( test_r, test_c, <span class="keyword">false</span> );</div>
<div class="line">        <a class="code" href="group__data__table.html#ga2198c3ff2ad1a385d2d1461df28e3b2f">table_check</a>( good_r, good_c, <span class="keyword">false</span> );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// validate helper function and module</span></div>
<div class="line">        <span class="keyword">function</span> get_value( vid ) = <a class="code" href="group__data__table.html#ga99c312a5d76429a02851441ef923dfcb">table_get</a>(test_r, test_c, vid, <span class="stringliteral">&quot;tv&quot;</span>);</div>
<div class="line">        module run_test( fname, fresult, vid )</div>
<div class="line">        {</div>
<div class="line">          value_text = <a class="code" href="group__data__table.html#ga99c312a5d76429a02851441ef923dfcb">table_get</a>(test_r, test_c, vid, <span class="stringliteral">&quot;td&quot;</span>);</div>
<div class="line">          pass_value = <a class="code" href="group__data__table.html#ga99c312a5d76429a02851441ef923dfcb">table_get</a>(good_r, good_c, fname, vid);</div>
<div class="line"></div>
<div class="line">          test_pass = <a class="code" href="group__utilities.html#ga0d2b2e012e358967b524ad7289a5e099">validate</a>( cv=fresult, t=pass_value, pf=<span class="keyword">true</span> );</div>
<div class="line">          test_text = <a class="code" href="group__utilities.html#ga0d2b2e012e358967b524ad7289a5e099">validate</a>( str(fname, <span class="stringliteral">&quot;(&quot;</span>, get_value(vid), <span class="stringliteral">&quot;)=&quot;</span>, pass_value), fresult, pass_value );</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">          <span class="keywordflow">if</span> ( pass_value != s )</div>
<div class="line">          {</div>
<div class="line">            <span class="keywordflow">if</span> ( !test_pass )</div>
<div class="line">              <a class="code" href="group__data__console.html#ga1ece4e2cff9ae45c85429c226eb8362c">log_warn</a>( str(vid, <span class="stringliteral">&quot;(&quot;</span>, value_text, <span class="stringliteral">&quot;) &quot;</span>, test_text) );</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( show_passing )</div>
<div class="line">              <a class="code" href="group__data__console.html#gacb9540a228d2c15623784ff0b0653722">log_info</a>( str(vid, <span class="stringliteral">&quot; &quot;</span>, test_text) );</div>
<div class="line">          }</div>
<div class="line">          <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( show_skipped )</div>
<div class="line">            <a class="code" href="group__data__console.html#gacb9540a228d2c15623784ff0b0653722">log_info</a>( str(vid, <span class="stringliteral">&quot; *skip*: &#39;&quot;</span>, fname, <span class="stringliteral">&quot;(&quot;</span>, value_text, <span class="stringliteral">&quot;)&#39;&quot;</span>) );</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">// Indirect function calls would be very useful here!!!</span></div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_defined&quot;</span>, <a class="code" href="group__prim__test.html#ga51d7fdb800c10f4b7479d23b89ab8d22">is_defined</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;not_defined&quot;</span>, <a class="code" href="group__prim__test.html#ga62dbd35f498bfc2a090812b1cf8a37c4">not_defined</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_empty&quot;</span>, <a class="code" href="group__prim__test.html#gaba1e87e102e1f9231ba30b43c8caa947">is_empty</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_scalar&quot;</span>, <a class="code" href="group__prim__test.html#ga258e8911375d30ff85a6e52df01dc1c5">is_scalar</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_iterable&quot;</span>, <a class="code" href="group__prim__test.html#ga820ab47fec7088d7ae5ee3bbc1b2e7c5">is_iterable</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_string&quot;</span>, <a class="code" href="group__prim__test.html#ga11e38865eb0e8f26b163886b255cb766">is_string</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_vector&quot;</span>, <a class="code" href="group__prim__test.html#ga28cc79189a92c7d1db5a3262114b0cad">is_vector</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_boolean&quot;</span>, <a class="code" href="group__prim__test.html#ga7b7ed62c364c8e76c93d42eb4a23b5d4">is_boolean</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_integer&quot;</span>, <a class="code" href="group__prim__test.html#ga689545ed19d52c03a6f4333c29133da7">is_integer</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_decimal&quot;</span>, <a class="code" href="group__prim__test.html#gacbcd657d533bafc911650803fe4dee97">is_decimal</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_number&quot;</span>, <a class="code" href="group__prim__test.html#gac47a7785d144083733c43327ea092e1d">is_number</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_range&quot;</span>, <a class="code" href="group__prim__test.html#gadeae0c11f700305bec805677c612c4dc">is_range</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_nan&quot;</span>, <a class="code" href="group__prim__test.html#ga068402d4bbb2bbd22b955ad1e14f104b">is_nan</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_inf&quot;</span>, <a class="code" href="group__prim__test.html#ga317a3d47f756500d11dbb1a602ad9e9b">is_inf</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_even&quot;</span>, <a class="code" href="group__prim__test.html#gac61c3ea156e546e556ae399e5d0f60ec">is_even</a>(get_value(vid)), vid );</div>
<div class="line">        <span class="keywordflow">for</span> (vid=test_ids) run_test( <span class="stringliteral">&quot;is_odd&quot;</span>, <a class="code" href="group__prim__test.html#gadd40e644090e5ea548d68a8cbebbba74">is_odd</a>(get_value(vid)), vid );</div>
<div class="line"></div>
<div class="line">        <span class="comment">// end-of-tests</span></div>
</div><!-- fragment --> </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="validation.html">Validation</a></li><li class="navelem"><a class="el" href="tv_prim.html">Primitives Validation</a></li><li class="navelem"><a class="el" href="tv_prim_test.html">Variable Tests</a></li>
    <li class="footer">Generated on Thu Feb 2 2017 18:52:10 for omdl by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.9.1 </li>
  </ul>
</div>
</body>
</html>
